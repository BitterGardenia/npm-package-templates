import fs from 'node:fs'

export default fs.readdirSync('packages').filter((f) => {
  if (!fs.statSync(`packages/${f}`).isDirectory() || !fs.existsSync(`packages/${f}/package.json`)) {
    return false
  }
  const pkg = fs.readFileSync(`packages/${f}/package.json`)
  if (pkg.private && !pkg.buildOptions) {
    return false
  }
  return true
})
